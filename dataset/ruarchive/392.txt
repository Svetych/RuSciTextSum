пространственные индексы всегда были важной проблемой для многомерных наборов данных в реляционных базах данных (dbs), в частности для тех, которые имеют дело со сферическими координатами, например, широта / долгота для местоположений на Земле или ra / dec для небесных объектов. некоторые серверы баз данных предлагают встроенные возможности для создания индексов по этим столбцам (координатам), что, следовательно, ускоряет выполнение запросов, связанных с ними. однако 1. использование этих средств может быть непростым, 2. они обычно используют синтаксис, сильно отличающийся от астрономического, 3. их производительность неадекватна для использования в астрономии.    в рамках проекта mcs library (calderone & nicastro 2007 ; nicastro & calderone 2006, 2007 ; ) мы внедрили пакет dif, инструмент, который полностью автоматически выполняет пикселизацию неба и управляет ею как с помощью htm (kunszt et al., 2001), так и healpix (grski et al., 2005). схема. используя простой инструмент, можно легко проиндексировать любую таблицу базы данных со столбцами небесных координат. это достигается за счет использования возможностей, предлагаемых сервером базы данных mysql (который на данный момент является единственным сервером, поддерживаемым mcs), то есть триггеров, представлений и плагинов. имея таблицу с координатами неба, пользователь может полностью проиндексировать ее, чтобы выполнять быстрые запросы по прямоугольным и круглым областям (конус) или создать файл карты healpix. sql-запрос для выбора объектов в конусе будет выглядеть следующим образом: ` select * from mycatalogue where ` ` entriesincone(20, 30, 5 ) `, где ( 20,30 ) - координаты центра в градусах, а 5 - радиус в угловых минутах. важно отметить, что менеджеру базы данных необходимо указать только несколько параметров на этапе настройки, в то время как обычному пользователю не нужно ничего знать о пикселизации неба ни для запросов \"select\", ни для запросов \"insert\", ни для запросов \"update\". это также демонстрирует, что нет необходимости расширять стандартный sql для астрономических запросов (см. adql), по крайней мере, если mysql используется в качестве сервера базы данных. с точки зрения индексации таблицы базы данных, отображение сферы с помощью пиксельной схемы означает преобразование 2d в 1d пространство, следовательно, для столбца с идентификаторами пикселей может быть создан стандартный индекс дерева b. в большой астрономической таблице, в зависимости от `глубины\" пикселизации, это может привести к повышению эффективности поиска на 45 порядков. схемы htm и healpix широко используются в астрономии и в настоящее время являются достаточно зрелыми, чтобы рассматриваться в качестве кандидатов для индексации таблиц, содержащих астрономические данные. обе они имеют открытый исходный код и распространяются в виде библиотек c++. htm использует треугольные пиксели, которые можно рекурсивно разделить на четыре пикселя. базовые пиксели равны 8, по 4 для каждого полушария. эти `триксели\" не равны по площади, но алгоритм индексации очень эффективен для выбора точечных источников в каталогах. healpix использует псевдоквадратные пиксели равной площади, особенно подходящие для анализа крупномасштабных пространственных структур. базовые пиксели равны 12. использование 64-разрядного целого числа для хранения идентификаторов индекса приводит к ограничению размера пикселей примерно в 7,7 и 0,44 миллисекунды на стороне для htm и healpix соответственно. возможность быстрого получения списка объектов в заданном регионе неба имеет решающее значение в нескольких проектах. например, поиск временных источников, таких как гамма-всплески, требует быстрого поиска по каталогам, чтобы быстро сопоставить известные источники с обнаруженными объектами. инфракрасный/ оптический роботизированный телескоп rem (nicastro & calderone, 2006) использует каталоги с индексацией htm для получения списка объектов в регионах @xmath0. в этом случае доступ к одному миллиарду каталогов объектов, подобных gsc2.3, занимает около 10 мс. наличие полностью автоматической индексации htm и healpix имело бы решающее значение для управления базами данных будущих крупных миссий, таких как gaia. также проект виртуальной обсерватории значительно выиграл бы от внедрения общей схемы индексации для всех различных типов архивов, которыми он может управлять. соответствующими параметрами для двух пикселизаций являются: максимальное разрешение. ( @xmath1 ) : = @xmath2 $ ] = = @xmath3 ( где @xmath4 ) * htm * * healpix * + @xmath5 : @xmath6 @xmath3 ( где @xmath4 ) + диапазон ввода : @xmath7 $ ] @xmath8 $ ] + max @xmath9 : @xmath10 @xmath11 + максимальное разрешение. ( @xmath1 ) : @xmath12 @xmath13 ( @xmath14 ) + ' \" \" + @xmath15 ( глубина ) : @xmath16 $ ] ; @xmath17 ( параметр разрешения order @xmath18 ) : @xmath19 $ ] + как упоминалось, максимальное разрешение связано с использованием 64-разрядных целых чисел, и это является неотъемлемой частью библиотек htm и healpix c++. mcs - это набор высокоуровневых классов c++, предназначенных для реализации сервера приложений, то есть приложения, предоставляющего услугу по сети. mcs предоставляет классы для взаимодействия с сервером базы данных mysql, управления им и расширения его возможностей. включенный пакет myro позволяет управлять разрешениями базы данных для каждой строки, в то время как пакет dif позволяет автоматически управлять пикселизацией неба с помощью схем htm и healpix. дополнительную информацию смотрите в разделе. чтобы включить dif, при установке mcs достаточно указать скрипту configure две опции ` --enable - dif --with - mysql - source = path `, где ` path ` - это путь к исходному каталогу mysql. библиотеки htm и healpix c++ включены в пакет dif. будет создана база данных с именем \"dif\", содержащая вспомогательную таблицу \"tbl\" и _ виртуальную _ таблицу \"dif \", которая динамически управляется механизмом базы данных dif. теперь давайте предположим, что у вас есть база данных `mydb ` с таблицей `mycat `, содержащей два столбца координат ` racs ` и ` deccs `, представляющие экваториальные координаты j2000, преобразованные в сантиметры в угловых секундах (для этого требуется 4 байта вместо 8, необходимых для двойного значения). чтобы сделать таблицу управляемой с использованием как схемы пикселизации htm, так и healpix, достаточно дать команду: где `dif` - это имя скрипта, используемого для выполнения административных задач, связанных с таблицами, обработанными с помощью dif, 6 - глубина htm, а 8 - порядок healpix, тогда как 0 ( 1) - это порядок пикселизации выбирает кольцевую ( вложенную) схему. последние два параметра - это sql-выражения, которые преобразуют в градусы значения координат, содержащиеся в полях таблицы `racs ` и ` deccs `. если координаты уже содержат градусы, то было бы достаточно указать их имена, например `dif... ra dec`. необходим пароль root mysql. в следующем выпуске мы добавим возможность выполнять простое перекрестное сопоставление между каталогами (управляемыми по-разному). при наличии индексированного каталога htm строка запроса для получения списка объектов в круговой области с центром в @xmath20 и @xmath21 с радиусом @xmath22 будет : + ` выберите * из mycat_htm, где dif_htmcircle(60,30,40 ) ; ` + обратите внимание на суффикс имени таблицы \" _ htm \", который необходим для фактически получите доступ к представлению, обрабатываемому dif. для прямоугольника с одинаковыми центром и сторонами @xmath23 вдоль оси @xmath24 и @xmath25 вдоль оси @xmath26 : + ` выберите * из mycat_htm, где dif_htmrect(60,30,50,20 ) ; ` + указание только трех параметров подразумевало бы выделение квадрата. выбрав использование индексации как htm, так и healpix, можно было бы запросить все идентификаторы healpix объектов в квадрате @xmath23 с помощью функции htm : + ` выберите healpid из mycat_htm, где dif_htmrect(60,30,50 ) ; ` + чтобы просто получить идентификаторы пикселей, попадающих в круглую / прямоугольную область можно просто \"выбрать идентификатор из dif.dif where...\", т.е. никакой конкретной таблицы, управляемой dif, не требуется. чтобы получить идентификаторы порядка 10 в кольцевой схеме, можно вычислить их на лету: + ` выберите dif_healplookup(0,10,racs/3.6e5,deccs/3.6e5 ) ` + ` из mycat_htm, где dif_htmcircle(60,30,20) ; ` + присвоение 1 вместо 0 дало бы идентификаторы вложенной схемы. имея `ra ` и `dec ` в градусах, можно было бы просто ввести ` (0,10, ra, dec )`. если у вас есть только идентификаторы healpix, то записи в круговой области могут быть выбраны следующим образом: + ` выберите * из mycat_healp, где dif_healpcircle(60,30,40 ) ; ` + обратите внимание на таблицу суффикс имени ` _ healp `. прямоугольные выборки только для индексированных таблиц healpix будут доступны в будущем. текущий список функций таков: + `dif_htmcircle `, `dif_htmrect `, ` dif_htmrectv `, `dif_healpcircle `, + ` dif_htmlookup `, ` dif_healplookup `, ` dif_sphedist `. + ` dif_htmrectv ` принимает четыре угла прямоугольника, которые затем могут иметь любую ориентацию на небе. \"dif_sphedist \" вычисляет угловое расстояние между двумя точками на сфере, используя формулу haversines. первая версия предоставленной пользователем библиотеки idl и демонстрационных программ, предназначенных для создания карт healpix на основе результатов sql-запросов, доступна по адресу. 

в различных астрономических проектах крайне важно иметь таблицы с индексацией координат. все оптические и ик-каталоги неба содержат до 1 миллиарда объектов, число которых будет увеличиваться с предстоящими проектами. также частичные обзоры неба на различных длинах волн могут собирать информацию (а не только списки источников), которую можно сохранить в таблицах с упорядочением координат. выбор подмножества этих записей или их перекрестное сопоставление может оказаться неосуществимым, если индексация не выполняется. была предложена тесселяция неба с различными функциями отображения. дело в том, что астрономическое сообщество принимает схемы htm и healpix по умолчанию для каталогов объектов и для визуализации и анализа карт, соответственно. в рамках проекта библиотеки mcs мы теперь сделали доступными в качестве функций, вызываемых mysql, различные средства htm и healpix. это стало возможным благодаря возможности добавления внешних подключаемых модулей, предоставляемой mysql 5.1. пакет dif (dynamic indexing facilities), распространяемый в библиотеке mcs, создает и управляет комбинацией представлений, триггеров, движка базы данных и подключаемых модулей, позволяя пользователю работать с таблицами базы данных, индексированными с использованием одной или обеих этих схем пикселизации, полностью прозрачным образом.