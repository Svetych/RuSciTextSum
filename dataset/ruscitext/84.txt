Влияние различных типов орфографических ошибок на качество статистического машинного перевода 

1. Введение 
Влияние грамотности исходного текста на качество машинного перевода кажется очевидным: орфографические ошибки в оригинале затрудняют распознавание словоформ и их последовательностей и, соответственно, процесс перевода (см., например, Carrera et al. 2009; Plesco, Rychtyckyj 2012). Отсутствие опечаток/ орфографических ошибок, правильная расстановка знаков препинания и заглавных букв входит — наряду со стилистическими требованиями — в число условий подготовки текста для машинного перевода (ср. понятие «controlled/standard language»; см. Aikawa et al. 2007 о сравнительном влиянии нескольких стилистических и орфографических факторов на итоговое качество перевода). Соответственно, устранение опечаток может быть частью предобработки текста, предназначенного для любого автоматического анализа (см., например, Shoukry, Rafea 2012 о нормализации арабских текстов из твиттера для сентимент-анализа).
С распространением бесплатных онлайн-сервисов машинного перевода все большую долю в них занимают тексты, которые не подвергаются предварительному редактированию, могут содержать большое количество опечаток, неверную пунктуацию и употребление заглавных букв (Jiang et al. 2012). Добавим сюда случаи перевода интернет-страниц, элементы которых, будучи скопированы в окно перевода, превращаются в набор слов и словосочетаний, не разделенных пунктуацией.
Наконец, отдельную проблему представляет употребление диакритики в тех языках, где она существует: зачастую авторы разного рода «субстандартных» текстов склонны пренебрегать ею. Обычно это происходит при наборе текста на клавиатуре, предназначенной для другого языка и не имеющей нужных символов; таким образом, в отличие от других типов ошибок, возникающих по вине пользователя (по небрежности или неграмотности), диакритика чаще отсутствует по техническим причинам.
Некоторые онлайн-системы перевода помогают пользователю исправить опечатки в исходном тексте — указывая на слово, содержащее ошибку, или даже предлагая варианты исправления. Однако при переводе с иностранного языка воспользоваться такими подсказками, очевидно, сложно: не зная иностранного слова даже на уровне понимания общего смысла, пользователь в большинстве случаев не будет уверен и в его написании. Можно предположить, что обработка исходного текста должна производиться автоматически, являясь составной частью алгоритма машинного перевода.
Интересным кажется узнать, насколько различные типы ошибок в запросе влияют на итоговое качество перевода. Для нашего исследования мы взяли три языковые пары: англо-русскую, немецко-русскую и польско-русскую. Для каждой пары был взят набор из 500 случайных пользовательских запросов к сервису машинного перевода, которые последовательно тестировались: 
• в оригинальном виде, как они задавались пользователями;
• только с исправленной диакритикой (кроме английского);
• с исправленной диакритикой и прочими опечатками/ошибками, включая лишние или недостающие пробелы;
• с исправленной капитализацией и пунктуацией;
• полностью исправленными. 
В разделе 2 мы приведем примеры типичных ошибок в пользовательских запросах; в разделе 3 более подробно охарактеризуем тестовые наборы; в разделе 4 опишем последовательность эксперимента и применявшиеся в нем метрики. Наконец, в разделе 5 будут приведены собственно результаты измерений и комментарии к ним. 
2. Типичные ошибки в запросах 
Приведем типичные примеры ошибок в запросах (все примеры сконструированы нами либо взяты из открытых интернет-источников). 
1. Опечатки:
• случайные опечатки, пропуск или перестановка одной или нескольких букв, вставка или пропуск пробела и т. д.: англ. chanel → channel ‘канал’, theey → they ‘они’, sayi ng → saying ‘говоря’; dont’ → don’t; польск. Warszwa → Warszawa ‘Варшава’;
• отсутствие пробела между словами, разделенными знаками препинания: англ. I saw him yesterday.He said… → I saw him yesterday. He said… ‘Я видел его вчера. Он сказал…’.
Такого рода ошибки часто бывают систематическими (т. е. автор последовательно не ставит пробелы после знаков препинания), и, поскольку многие системы не умеют разделять слова без пробела, приводят к резкому снижению качества перевода.
2. Отсутствие диакритики:
• польск. zolte zloto → żółte złoto ‘желтое золото’, нем. mude → müde ‘усталый’ (автор пользуется клавиатурой, не имеющей клавиш для особых символов и диакритических знаков).
Пропуск диакритики на отдельных буквах (не систематически во всем запросе), по крайней мере, в рассматриваемых здесь языках встречается редко, потому что символы с диакритикой расположены на отдельных клавишах и обычно не по соседству с соответствующими простыми символами; единственное исключение — l и ł на соседних клавишах в польской раскладке клавиатуры. Разумеется, неиспользование диакритики возможно только при неформальной переписке.
3. Отсутствие капитализации и/или пунктуации:
• нем. sind diese probleme für dich so wichtig → Sind diese Probleme für dich so wichtig? ‘Эти проблемы для тебя так важны?’ (пользователь в переписке или в чате пренебрегает заглавными буквами и знаками препинания; как и в случае с диакритикой, такого рода «послабления» возможны только в неформальных текстах); 
• польск. data i miejsce urodzenia adres nr dokumentu tożsamości/paszportu → Data i miejsce urodzenia, adres, nr dokumentu tożsamości/paszportu ‘Дата и место рождения, адрес, номер документа, удостоверяющего личность / паспорта’ (при копировании содержимого веб-страницы названия полей, которые требуется заполнить, сливаются в единую последовательность слов);
• польск. Mam na sprzedaż nowy VW. AUTO W STANU BARDZO DOBRYM ‘Продаю новый VW. Машина в очень хорошем состоянии’ (автор выделяет заглавными буквами важную часть сообщения);
• особый случай представляют собой обращения и приветствия в письмах, которые часто отделяются запятой, а далее идет текст с заглавной буквы и с новой строки; при копировании в окно перевода разрыв строк исчезает, и запятая оказывается перед заглавной буквой: польск. Witam, Uprzejmie informuję… ‘Добрый день. С уважением сообщаю…’ (обычная формулировка для официального письма).
Отметим, что в одном запросе могут содержаться и часто содержатся разные типы ошибок. 
3. Характеристика тестовых наборов 
Каждый из трех тестовых наборов, использованных в эксперименте, состоит из 500 случайных запросов к системе машинного перевода, каждый — длиной не более 1000 символов. Свойства наборов, однако, довольно сильно отличаются, что вызвано, с одной стороны, свойствами языков, с другой — разницей в тематике запросов.
В каждом языке могут быть свои особенности — в том числе орфографические, — которые могут приводить к ошибкам в запросах. Так, немецкий и польский языки различаются по количеству букв с диакритикой: 3 в немецком и 9 в польском; соответственно, игнорирование диакритики в польском языке сильнее искажает текст, и можно предположить, что и степень влияния этого фактора на качество перевода будет выше. С другой стороны, в немецком языке принято писать с большой буквы все имена существительные; соответственно, пренебрежение капитализацией вызывает дополнительные орфографические ошибки.
Тематика рассматриваемых тестовых наборов также достаточно сильно отличается. Так, к примеру, в переводах с немецкого языка около 40 % составляют учебные тексты и упражнения, еще около 25 % — литературные тексты, переводы веб-страниц — 9 %, а переписка любого рода (включая чаты) — лишь 8 %. Напротив, в запросах на перевод с английского языка доля переписки превышает 30 %, доля учебных текстов составляет около 20 %, примерно столько же составляют переводы веб-страниц, а доля литературных текстов — всего около 8 %. В польском же переводы веб-страниц находятся в лидерах — почти 45 %; следом идет переписка (около 40 %), а литературные и учебные тексты вместе составляют около 10 %.
Очевидно, разница в тематике является одной из причин различной средней длины запросов, см. Таблицу 1. 
Можно было бы ожидать, что такое различие в тематике скажется на среднем уровне грамотности запросов: литературные тексты (которые, скорее всего, не набираются вручную, а копируются из какого-либо источника в интернете) должны быть орфографически и пунктуационно выверены, в отличие, к примеру, от сообщений в чатах. В этом случае средний уровень грамотности немецких запросов должен быть выше, чем, скажем, английских. Сравним, однако, данные о количестве запросов с ошибками разных типов в Таблице 2. 
Мы видим, что наши ожидания не полностью оправдываются. В английском тестовом наборе, несмотря на большое количество потенциально «ненормативной» переписки, доля ошибочных запросов как в целом, так и по отдельным типам ошибок ниже всего. Количество ошибок в употреблении заглавных букв и в пунктуации в польском языке значительно превышает количество аналогичных ошибок в немецком.
Часть этих различий, тем не менее, можно объяснить. Соотношение ошибок в диакритике в польском и немецком языке в целом соответствует ожиданиям. Большое количество ошибок на капитализацию и пунктуацию в польском языке, очевидно, происходит из-за переводов веб-страниц, отдельные элементы которых при копировании сливаются (см. примеры ошибок выше). 
4. Методика эксперимента 
Для сравнения результатов в каждом из трех тестовых наборов последовательно исправлялись ошибки различных типов. В результате, для каждого языка, помимо оригинального, были созданы следующие четыре набора:
• с исправленной диакритикой (кроме английского);
• с исправленной диакритикой и прочими опечатками/ошибками, включая лишние или недостающие пробелы; 
• с исправленными капитализацией и пунктуацией;
• полностью исправленные. 
Всего, таким образом, для немецкого и польского языков у нас было по пять наборов по 500 запросов, для английского — четыре.
Для каждого языка были подготовлены эталоны переводов на русский язык, после чего все наборы были протестированы на трех бесплатных статистических онлайн-системах машинного перевода. Для оценки качества применялась метрика BLEU (Bilingual Evaluation Understudy), широко используемая для оценки статистического машинного перевода.
BLEU основана на сравнении машинного перевода с эталоном, сделанным человеком. Для этого подсчитывается количество последовательностей из n слов (n-граммов), совпадающих в сравниваемом переводе и в эталоне; n обычно берется от 1 до 4. Значение BLEU высчитывается в среднем для всего корпуса переводов (в нашем случае 500 фрагментов для каждого языка) и составляет от 0 до 1 (либо от 0 до 100), где 0 означает, что совпадения отсутствуют, а 1 (100) — что сравниваемый корпус полностью идентичен эталону (см. подробнее о метрике BLEU: Papineni et al. 2002).
В нашем эксперименте использованы три метрики BLEU: а) стандартная (учитывающая пунктуационные знаки как отдельные токены); б) BLEU без учета пунктуации; и в) BLEU с учетом пунктуации и капитализации (т. е. учитывающая также различие строчных и заглавных букв в переводе и эталоне). 
5. Результаты эксперимента 
В этом разделе приводятся данные по изменению BLEU в трех системах машинного перевода для каждого языкового набора при исправлении ошибок разного типа: опечаток, капитализации и пунктуации, всех ошибок. В скобках указывается прирост значения BLEU по сравнению с исходными запросами. 
5.1. Приведем результаты подсчетов стандартного BLEU (с учетом пунктуации) 
Прокомментируем результаты измерений.
1. В английском языке исправление обоих типов ошибок дает более или менее равномерный прирост качества (возможно, это соотносится с тем, что процент запросов с ошибками каждого из этих типов в английском сравним — 32,4 % и 38 %, см. Таблицу 1). Правда, в разных системах вклад двух типов ошибок может отличаться: в С1 и С2 сильнее влияние опечаток, в С3 больше влияет капитализация/пунктуация. 
2. В немецком обращает на себя внимание существенно большее влияние на рост BLEU исправление опечаток по сравнению с исправлением ошибок капитализации и пунктуации — хотя процент запросов с ошибками второго типа не меньше, а даже несколько больше, чем первого (40,2 % и 48,8 % соответственно — соотношение близко к тому, которое мы видели в английском наборе). Сходство соотношения во всех системах подтверждает этот результат. 
3. В польском языке, напротив, очень сильно влияние капитализации и пунктуации и невелик вклад опечаток. В определенной степени это связано с особенностями тестового набора и большой долей таких ошибок в нем (62,2 % запросов), однако это, очевидно, не единственная причина: по сравнению с английским доля запросов с опечатками в польском несколько выше (36,6 % против 32,4 %), а влияние их исправления на качество ниже во всех системах перевода. 
Посмотрим, насколько влияет на качество перевода исправление только диакритики, без прочих опечаток, в польском и немецком языках. Приводятся только значения BLEU при исправленной диакритике и разница с исходными запросами. 
Как видно, исправление только диакритики дает очень небольшой эффект. В немецком языке он вовсе нулевой. В польском он отличен от нуля — что, видимо, объясняется бо́льшим количеством букв с диакритикой и, соответственно, бо́льшим процентом ошибок данного типа (см. Таблицу 2), — но тоже очень невелик. Более или менее заметен он в польском языке только в системе 1, даже несмотря на то, что и общие показатели BLEU для польского языка в ней выше; в процентном отношении прирост BLEU в Системе 1 составляет 2,1 %, в Системах 2 и 3 — 0,5 %.
Приведем для сравнения результаты измерений по другим метрикам BLEU. 
Ожидаемым образом, здесь резко уменьшаются цифры в предпоследней колонке, в немецком языке — вовсе до нуля. Оставшиеся цифры, очевидно, показывают реальный вклад исправления капитализации и пунктуации в качество перевода как такового. В то же время влияние исправленных опечаток в немецком и польском языках при таком способе измерения несколько повышается. 
Заключение 
Данная работа посвящена влиянию орфографической правильности исходного текста на качество статистического машинного перевода. Мы показали, что исправление всех — орфографических и пунктуационных — ошибок может дать прирост качества по метрике BLEU примерно на 10–15 % по сравнению с неисправленным текстом. Что касается отдельных классов ошибок: орфографических, с одной стороны, и в пунктуации и капитализации — с другой, вклад каждого из этих классов может различаться в зависимости от свойств языка и особенностей запросов. Мы также рассмотрели влияние на перевод отдельного типа ошибок — отсутствия диакритики, которое может возникать не только по небрежности пользователя, но и по техническим причинам. Вклад исправления этого типа ошибок в качество перевода оказался невелик — впрочем, он в большей мере, чем другие, зависит от конкретного языка.
Было бы интересно проверить полученные результаты на других языковых парах. Кроме того, в дальнейшем необходимо исследовать влияние на качество перевода других типов ошибок — в первую очередь синтаксических.

В статье рассматривается рост качества машинного перевода в зависимости от исправления различных типов ошибок в исходном тексте на материале трех языковых пар (англо-русской, немецко-русской и польско-русской). Мы выбрали по 500 случайных пользовательских запросов к сервису машинного перевода, последовательно исправили в них разные типы опечаток и ошибок: отсутствующую диакритику; опечатки любого рода; неправильную пунктуацию и капитализацию; все ошибки. Всего для немецкого и польского языков мы получили по пять тестовых наборов (включая оригинал), для английского — четыре (в нем отсутствует диакритика). Все наборы были протестированы на трех бесплатных статистических системах машинного перевода, и для каждого было измерено значение BLEU. Исправление всех опечаток дает увеличение BLEU примерно на 10–15 % по сравнению с оригинальными запросами. Исправление опечаток и ошибок в пунктуации и капитализации по отдельности дают улучшение примерно на 5–10 % в зависимости от языка и особенностей тестового набора. Исправление же только диакритики прироста почти не дает: 0 % для немецкого языка и 0,5–1 % для польского. 