Исследование применимости методов тематической классификации в задаче классификации отзывов о книгах 

Введение 
Задача автоматической классификации отзывов о товарах является на сегодняшний день весьма востребованной, о чем свидетельствует появление соответствующей функции в коммерческих системах мониторинга социальных медиа. Тем не менее для русскоязычного контента до настоящего времени отсутствовали общедоступные размеченные корпуса, на которых разработчики могли бы провести оценку качества своих методов. Данный пробел были призваны восполнить новые дорожки семинара РОМИП, в рамках которых участникам предлагалось решить задачу классификации отзывов о книгах, фильмах и фотокамерах. 
В настоящей работе исследуются методы решения задачи классификации отзывов о книгах 2 (положительный, отрицательный) и 3 (положительный, отрицательный, нейтральный) класса в рамках новых дорожек РОМИП. 
Постановка задачи 
Участникам была предложена тестовая коллекция, представляющая собой набор отзывов пользователей рекомендательного портала Imhonet.ru на книги различных жанров (всего 24 160 отзывов). Каждый отзыв имел пользовательскую оценку от 1 до 10 баллов. Из имеющихся дорожек нами были выбраны две: дорожка по классификации отзывов пользователей на 2 класса и дорожка по классификации отзывов пользователей на 3 класса. В первом случае требовалось разделить отзывы на положительные и отрицательные. Во втором случае требовалось разделить отзывы на 3 класса: «положительный», «средний» (в отзыве указываются достаточно значимые положительные и отрицательные стороны оцениваемой книги) и «отрицательный».
Среди особенностей задачи следует отметить сильный дисбаланс тестовой коллекции в сторону положительных отзывов. 
Формирование обучающей выборки 
Двое экспертов независимо оценивали тестовую коллекцию и проставляли оценки: негативный отзыв, позитивный отзыв, отзыв содержит как положительные, так и отрицательные характеристики. Каждый эксперт оценил порядка 4000 отзывов, большая часть из которых была отнесена к положительным. В качестве обучающей выборки в разных прогонах брались как результат оценки одного эксперта, так и множество пересечений оценок обоих экспертов (отзывы, для которых оба эксперта выставили одинаковую оценку). Согласованность оценок экспертов при формировании обучающей выборки достигала 80 %. 
Представление документа и извлечение терминов 
Исследования проводились в рамках векторной модели представления документов, при которой документ описывается набором выделенных из текста терминов. В работе исследуется возможность обогащения классификационных признаков, полученных автоматическим (базовым) методом, который хорошо зарекомендовал себя в задаче тематической классификации документов [1–4], путем добавления к ним терминов, выделенных в рамках лингвистического подхода с использованием словарей оценочной лексики.
В базовом методе в качестве однословных терминов выделялись все слова документа за исключением служебных частей речи, числительных и дат. Многословные термины выделялись при помощи алгоритма синтактико-семантического анализа [5] и представляли собой простые именные группы (напр. «глубокая мысль», «классика жанра»). Именные группы были усложнены включением в их структуру конструкций с предлогами в соответствии с моделями управления [6] (напр. «взгляд на мир», «книга для детей»).
Для повышения качества рубрицирования и обогащения набора классификационных признаков был применен лингвистический подход. Путем анализа имеющихся отзывов эксперт выделил атрибуты книги, на которые большинство пишущих обращали внимание. Таким образом, был получен список наиболее значимых для читателей вещей: язык, сюжет, герои, концовка, впечатления от прочтения, автор и т. д. Список данных атрибутов был расширен синонимами (книга=книженция=опус=чтиво=произведение=сочинение и т. д.; конец=концовка=финал=развязка=хэппи-энд; герой=персонаж=характер и т. д.) и гипонимами (книга=роман=повесть=рассказ=детектив=пьеса=фэн тези=поэма и т. д.; автор=писатель=поэт).
Далее были составлены словари оценочной лексики (прилагательные и глаголы), выражающей положительную, отрицательную или среднюю оценку. Примеры положительной оценки: бесподобный, великолепный, яркий; запомниться, нравиться, потрясать. Примеры отрицательной оценки: бессодержательный, занудный, пошлый; устареть. Примеры оценки «средне»: неоднозначный, неровный, средненький, специфический.
Для лингвистического анализа текста были использованы семантические шаблоны, описывающие возможные синтаксические связи в предложении между группами терминов из получившихся словарей [7]. Шаблон задает лексико-грамматические ограничения на искомую конфигурацию связей между словами в тексте, которые определяются синтаксическим анализатором. На Рисунке 1 приведен семантический шаблон для извлечения оценки книги, которая выражается прилагательным в конструкциях вида: Книга оказалась достаточно интересной; Эти писатели стали культовыми еще в 60-е годы. 
В вершинах указываются ограничения на части речи (SpeechPart=“Noun” — существительное), конкретные слова (!Name==“СЧИТАТЬ” — запрещен глагол «считать»), или семантические разряды слов (SemanticType=“Verb:ServiceLink” — глагол-связка). В эллипсах описываются ограничения на синтактико-семантические связи между словами: тип связи (RelationName==“аргумент”), семантическая роль (RelationRole==“признак”), падеж (RelationCase==“И” — именительный). Окончательно такой шаблон параметризуется множеством конкретных слов из соответствующих словарей: множеством синонимов и гипонимов для книги и ее атрибутов параметризуется узел с ограничениями SpeechPart=“Noun”, имеющий роль «Объект оценки» (EstimatedObject); множеством оценочных слов параметризуется узел с ограничениями SpeechPart=“Adjective”, имеющий роль «Оценка» (QualityAdjective); узел с ограничением SemanticType == “Verb:ServiceLink” and !(Name == “СЧИТАТЬ”) параметризуется множеством глаголов-связок за исключением глагола «считать». Выделенные таким образом пары «объект оценки + оценка» использовались в качестве терминов для автоматического определения тональности отзывов. Примеры положительных терминов: глубокое произведение; книга зацепила; любить книгу; произведение интересное; проглотить книгу; сильная вещь; сюжет захватывает; хорошее чтение; финал неожиданный; язык легкий. Примеры отрицательных терминов: дочитать с трудом; испортить настроение; книга бессмысленная; неудачный перевод; скучная книга; сюжет не затягивает; стиль не понравился; читать по диагонали; язык уродливый. 
Методы классификации 
В работе исследованы два подхода. В первом подходе для обучения классификатора использовались оценки самих пользователей. По ним строилась линейная регрессионная модель в реализации SVM-Light [8]. Затем по этой модели вычислялись веса документов из обучающей выборки и подбирались пороги отнесения документа к заданным классам таким образом, чтобы получить наилучшее соответствие между получаемым разбиением и разметкой экспертов (максимизировалась F-мера).
Во втором подходе классификатор строился только на основе обучающей выборки, сформированной экспертами. Рассмотрены следующие методы классификации:
• Линейный классификатор, в котором обучение производится для каждого класса независимо от других классов, в реализации SVM-Light [8]. Если в процессе обработки тестовой выборки один документ попадал в несколько классов, то мы принудительно относили его к одному классу, в котором этот документ имел самый большой вес.
• Линейный классификатор, который строит множество непересекающихся классов, то есть ставит в соответствие документу ровно в один из заданных классов. Использовалась реализация SVM-Multiclass [9].
• Линейный классификатор, который обучается независимо на классах положительных и отрицательных отзывов в реализации SVM-Light [8], а используется в задаче классификации на 3 класса. К классу нейтральных отзывов мы относили документы, которые классификатор приписывал одновременно и классу положительных, и классу отрицательных отзывов. 
Результаты 
В работе проанализированы результаты оценки 18 прогонов классификации на 2 класса и 24 прогона классификации на 3 класса. Прогоны варьировались:
• по способу формирования обучающей выборки: оценка первого эксперта [expert-1], второго [expert-2], согласованная оценка экспертов (обучающая выборка содержала только документы, которые эксперты оценили одинаково) [expert-and];
• по способу извлечения терминов: автоматический [base], смешанный (обогащение базового набора классификационных признаков в рамках лингвистического подхода с использованием словарей оценочной лексики) [hybrid];
• по методу классификации: регрессия [regression], линейный классификатор на независимые классы [one-per-class], на непересекающиеся классы [multiclass], линейный классификатор, обучающийся на классах положительных и отрицательных отзывов, но применяемый в задаче классификации на 3 класса [2-to-3-class]. 
Влияние различных подходов на качество классификации мы оценивали с помощью F1-меры [10], сильные и слабые требования к релевантности обозначены далее соответственно F-and и F-or.
Согласно Таблице 1, первый эксперт сформировал немного лучшую по качеству обучающую выборку, чем второй эксперт (лучшую в смысле качества обучения исследуемых методов), хотя различие между ними не превосходит нескольких процентов. Здесь и далее «average» и «maximum» обозначают в таблицах способ обобщения результатов по различным прогонам. В первом случае вычисляется средний результат, во втором случае берется максимальное значение. В частности, в Таблице 1 усреднение берется по различным методам и способам отбора терминов. 
Данные, приведенные в Таблице 2, свидетельствуют о том, что привлечение «продвинутых» лингвистических признаков дает незначительное улучшение результата для задачи классификации на 2 класса и даже немного ухудшает результат в случае 3 классов. Небольшой прирост результата можно объяснить тем, что извлекаемые в базовом методе термины оказались, по сути, эквивалентны большинству созданных семантических шаблонов, за исключением шаблонов, содержавших глаголы. Ухудшение результатов для задачи классификации на 3 класса, связано с некорректной группировкой терминов для класса нейтральных отзывов с использованием словарей оценочной лексики. Словарь оценочной лексики для нейтральных отзывов содержал только слова, соответствующие средней оценке, например, «средненький», «специфический», «сносный», «читабельный», «неровный». Но эта категория содержит согласно постановке задачи помимо нейтральных отзывов также документы, в которых книгу и хвалят, и ругают одновременно. В результате получилась низкая полнота покрытия языкового материала лингвистическими шаблонами документов данной рубрики.
Согласно Таблице 3, в задаче классификации на 2 класса наилучший результат был достигнут при помощи метода one-per-class. Остальные методы незначительно ему уступают. В задаче классификации на 3 класса лучшим оказался метод regression. Ему немного уступает one-per-class. Следует отметить, что наименьший разброс результатов при варьировании способов отбора классификационных признаков и формирования обучающей выборки дает метод one-per-class, что свидетельствует о меньшей чувствительности данного метода к качеству входных данных по сравнению с другими методами. 
На Рисунках 2 и 3 показаны сводные результаты по всем участникам, участвовавшим в дорожках классификации отзывов о книгах на 2 и 3 класса, соответственно. Наши прогоны обозначены темной заливкой и упорядочены на рисунках по возрастанию меры F-or, прогоны других участников обозначены более светлой заливкой и упорядочены по убыванию F-or. Использование разметки экспертом 1 дало равномерно более высокий результат по сравнению с разметкой эксперта 2 или их согласованной оценкой (возможно, это свидетельствует о том, что эксперт 1 имеет больше опыта). Поэтому наши прогоны на Рисунках 2 и 3 приводятся только для классификаторов, построенных по обучающей выборке первого эксперта. Расшифровка идентификаторов этих прогонов дана в Таблице 4. 
Заключение 
Проведена апробация ряда методов решения задач классификации отзывов о книгах на 2 и 3 класса. Установлено, что использование методов, обычно применяемых для решения задачи тематической классификации, позволяет получить достаточно высокое качество, сопоставимое с наилучшими результатами дорожек РОМИП по классификации Веб-сайтов и нормативно-правовых документов. Предложен метод обогащения классификационных признаков в рамках лингвистического подхода с применением словарей оценочной лексики, который дает незначительное улучшение результата при классификации на 2 класса. В дальнейшем мы планируем более детально исследовать возможность применения экспертно-лингвистических подходов для построения классификационных признаков.

Сфера автоматической классификации отзывов о товарах становится все более востребованной. В данной работе исследуются методы решения задачи классификации отзывов о книгах. Также, описаны различные способы формирования обучающей выборки, различные варианты на основе оценок двух экспертов. В статье говорится о методах извлечения классификационных признаков в рамках векторной модели представления документов. Далее рассказывается о применении лингвистического подхода для повышения качества рубрицирования и обогащения набора классификационных признаков. Рассказано о методах построения классификаторов для решения задач классификации отзывов о книгах на 2 (положительный, отрицательный) и 3 (положительный, отрицательный и нейтральный) класса. Исследованы два подхода. В первом подходе для обучения классификатора использовались оценки самих пользователей. Во втором подходе классификатор строился только на основе обучающей выборки, сформированной экспертами. В работе проанализированы результаты оценки различных вариантов классификации. Проведены оценка влияния различных подходов на качество классификации. В заключении показано, что хороший результат можно получить путем применения к рассматриваемым задачам методов тематической классификации. Достигнутые показатели не уступают наилучшим результатам классификации Веб-сайтов и нормативно-правовых документов, полученным участниками семинара РОМИП. Предложен метод обогащения классификационных признаков в рамках лингвистического подхода с применением словарей оценочной лексики.