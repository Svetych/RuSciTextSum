Моделирование энергетических систем в рамках многоагентного подхода

Введение
Потребность в доступной энергии всегда существовала в любом обществе. Потребление энергии растет с развитием человечества. Наиболее удобной формой является электроэнергия, график производства которой представлен на рис. 1.
Возникновение и бурное развитие альтернативной энергетики привело к принципиальному изменению целостной системы генерации, доставки и потребления электроэнергии. Это изменение заключается в возникновении обратной связи от локального источника энергии (ветрогенератор, солнечная панель и пр.) в сеть. Возникло понятие интеллектуальных энергетических сетей (Smart Grid — [2–4]). Многие авторы сравнивают текущее состояние исследований, разработок и внедрения новых методов управления в энергетике с началом развития Internet, введя в оборот термин Enernet — энергетический Интернет [5]. Рынки интеллектуальных систем управления энергетическими сетями оцениваются в миллиарды долларов.  
Разработка таких систем требует развития новых методов их моделирования. Одним из наиболее эффективных и часто используемых инструментов являются многоагентные системы [6]. В настоящей статье приводится описание таких систем, среды моделирования Any Logic [7], результаты моделирования одной из реальных энергетических сетей. Работа может быть интересна специалистам по энергетическим сетям и математикам, специализирующимся в области интеллектуальных систем.   
1. Описание многоагентного подхода
В последнее время все больше и больше систем моделируется при помощи метода, называемого многоагентным. Причем он применяется в совершенно разных областях: экология, медицина, логистика и т. д. [6–8].
В отличие от классических методов, в данном подходе не требуется описывать связи между различными транспортными, денежными или какими-то другими потоками, что значительно упрощает создание модели. Здесь отдельно задаются свойства и поведение различных элементов — агентов, и уже на их основе выстраивается   работающая система. Поэтому многоагентное моделирование часто называется моделированием снизу вверх.
Агент — это минимальный объект системы, с заданными схемами и правилами поведения (действиями). В модели может присутствовать различное количество агентов как одного типа, так и разных. Сами же агенты задаются так называемыми картами состояния (рис. 2).  
Карта состояний — это, фактически, конечный автомат с несколькими удобными дополнениями, предложенными Давидом Харелом, принятыми мировым моделирующим сообществом и вошедшими в стандартный язык UML (The Unified Modeling Language).
Они позволяют графически определить возможные состояния агента, переходы между ними, события, вызывающие эти переходы, временные задержки и действия, совершаемые агентом на протяжении своей жизни. Такие конструкции, как вложенные состояния, позволяют задавать режимы функционирования агента. Агент может иметь несколько параллельно активных и взаимодействующих карт состояний, каждая из которых отвечает за какой-либо аспект его жизни: например, образование и семейное положение.
Все объекты системы для того, чтобы иметь возможность взаимодействовать друг с другом, должны быть помещены в общую среду (пространство). Это может быть дискретное или непрерывное пространство. Выбор окружающей среды зависит от моделируемой задачи и поставленных целей.  
2. Постановка задачи и построение модели
Описание проблемы
На данный момент в Калининградской области работают несколько ТЭС, но их мощностей не хватает для обеспечения электроэнергией в полном объеме, и её приходится закупать у стран-соседей: Литва, Латвия, Эстония.
Также известно, что в ближайшем будущем некоторые граничащие с Калининградом страны будут закрывать свои станции, планируется закрытие и Российских ТЭС в этом регионе, что создаст нехватку электроэнергии.
Данные условия являются благоприятным фактором для строительства новой электростанции. Предполагается открыть там АЭС, необходимо рассчитать энергетический баланс и понять целесообразно ли строительство с точки зрения выдачи электроэнергии (не будет ли простоя, каковы потери и т. д.) 
Выбор среды моделирования
На данный момент существуют различные программы, поддерживающие многоагентный подход моделирования. Они различаются функционалом, способом распространения. Также люди, обладающие достаточными навыками в объектно-ориентированных языках программирование, могут создавать модели и без помощи сторонних приложений. Я остановил свой выбор на AnyLogic так как у этой программы имеется русскоязычный интерфейс, и её функционал позволяет полностью реализовать поставленную задачу при помощи многоагентного подхода. 
Создание модели
При построении модели прежде всего надо определиться с тем, что будет являться агентом. В данной задаче самым логичным выбором является: страна-агент. Можно было бы рассматривать энергосистему более подробно и брать за агентов, например, различные электростанции, но в данной задаче нам не принципиален вид энергосистемы внутри стран, нам нужен общий дефицит или избыток электричества для каждого государства.  
Получается, что у нас 5 агентов. Так как мы будем рассматривать 5 государств. Конечно, на самом деле в энергосистеме участвует больше стран, но некоторые из них мы можем не учитывать, так как в них идет гарантированная поставка, обеспеченная контрактами, например, в Польшу и Германию. И такие поставки мы будем учитывать просто прибавляя или отнимая число, записанное в контрактах (константу). 
Вид агента-страны (самый простой вариант) 
В каждом таком автомате учитывается время года, и он на каждом шаге выдает количество энергии, которое нужно (если нехватка внутри и не хватает своего собственного производства) или может предложить на экспорт.
Необходимо было соединить эти показатели различных стран. Это было можно сделать либо при помощи внешних функций, либо условно, взяв один из автоматов за «главный», считать все в нем. В данном случае реализован второй вариант не только потому, что было так удобнее, но и из-за того, что в дальнейшем будет усложнение модели (добавление новых состояний именно автомата-Калининграда, связанных с ремонтом и энергоблоками). 
Итоговый вариант агента-Калининграда
В каждом его состоянии просчитывается текущий энергетический баланс. Переход в состояние ремонта задан определенными вероятностями, которые основаны на экспертных оценках. Для выхода из состояния ремонта генерируется число дней (равномерно) в границах, которые определили эксперты.
Краткое описание того, что происходит в каждом состоянии:
1) Записываем потери, которые мы понесли на предыдущем состоянии. 
2) Далее генерируем количество произведенного электричества в заданных рамках (рамки зависят от времени года, этапа цикла работы и ремонта). Эти рамки определены экспертами.
3) Отнимаем поставки в Польшу и Германию.
4) Смотрим на другие страны (есть ли у них недостаток электричества). Если есть, то экспортируем. Экспорт ограничен не только дефицитом электричества в других странах, но и состоянием линий электропередач, если агент Калининград находится в состоянии ремонта, то это создает дополнительные ограничения.
5) В итоге либо у нас остается переработка, либо мы работаем в 0 и удается потратить все.
В данной модели можно менять приоритет раздачи энергии, а также учитывать, например, являемся ли мы первой опцией в поставке электричества или же наоборот. Что позволяет нам рассматривать различные сценарии (пессимистичный, базовый и оптимистичный)  
Работа модели
На выходе данная модель выдает общие потери, потери за предыдущий час и текущий энергетический баланс (рис. 5). Снизу показано, у каких стран недостаток электричества, а у каких наоборот, а сверху, что получилось при передаче максимально возможного на данный момент количества энергии из Калининграда.   
3. Выводы
Многоагентный подход оказался достаточно эффективным для моделирования поставленной задачи. Решение, — взять страну в качестве агента, лежало на поверхности, и оно оказалось удобным. Как и во многих других подходах мы использовали экспертные оценки, но в данном случае мы их не усредняли, а оставили элемент вероятности, что придает модели большую правдоподобность.
Конечно, существует множество вариантов улучшения, например, добавление ремонтов для других стран, стоимости электричества и т. д. И здесь мы наблюдаем еще одно преимущество многоагентного подхода над другими методами: очень легко менять или добавлять нечто новое. Если мы хоти добавить новый аспект, например, в данную модель деньги, то мы внутрь наших агентов добавим новые карты состояний, отвечающие за деньги. Если же мы дополняем уже   существующий аспект модели, то мы либо создаем новое состояние агента, либо что-то меняем в уже существующем состоянии.
Нередко встречаются модели, объединяющие в себе несколько методов. Частым симбиозом является соединение системно-динамического [8] и многоагентного подходов. Наиболее часто агентов применяют там, где выявить какие-то закономерности системы не представляется возможным, а задать поведение отдельных объектов можно. Большинство систем обладают именно такими свойствами, что делает многоагентный подход все более употребляемым.

В данной работе рассматривается возможность применения многоагентного подхода для расчета энергетического баланса города Калининград и его стран-соседей. Показаны этапы построения многоагентной модели в имитационной среде Anylogic, приведены результаты моделирования. В качестве агентов рассматриваются 5 государств. В каждом состоянии агента просчитывается текущий энергетический баланс. На выходе выдаются общие потери, потери за предыдущий час и текущий энергетический баланс. К преимуществам данного подхода относят его эффективность, большую правдоподобность и простое добавление новых аспектов в модель.