Автоматизированное преобразование последовательных Си программ для их распараллеливания

Для распараллеливания программ применяется как ручное распараллеливание, характеризующееся наибольшей трудоёмкостью, так и полностью автоматическое распараллеливание, не позволяющее получить лучшие результаты в силу сложности данной задачи. Альтернативой могут служить средства автоматизированного распараллеливания, которые берут на себя часть работы, но при этом вовлекают программиста в процесс распараллеливания для уточнения отсутствующей у компилятора информации. Одной из таких систем является система SAPFOR , разрабатываемая в институте прикладной математики им. М. В. Келдыша.
Система SAFPOR основывается на использовании компиляторных проектов Clang и llvm, и позволяет производить различные виды статического анализа, динамический анализ, а также выполнять автоматическое распараллеливание в моделях DVMH  и OpenMP, и, кроме того, производить нацеленные на распараллеливание преобразования исходного кода.
В рамках данной работы реализованы преобразования исходного кода, расширяющие класс программ, распараллеливание которых можно автоматизировать с помощью системы SAPFOR. Практика применения SAPFOR показывает, что востребованными преобразованиями являются сужение и расширение массива, а также разворот и перестановка циклов.
Для выполнения преобразований с помощью SAPFOR, пользователь должен расставить в исходном коде программы спецификации, оформляемые в виде компиляторных директив. Преобразования реализованы методом обхода синтаксического дерева программы и используют результаты различных видов статического анализа SAPFOR, в частности для проверки возможности проведения преобразований требуется анализ зависимостей.
Преобразование расширения массива создает перед гнездом циклов локальную копию массива с дополнительными измерениями, размерности которых указываются в клаузе. Все обращения к старому массиву в преобразуемой области будут заменены на обращения к новому массиву. Допустимо расширять скаляры, что позволяет векторизовать циклы. Применяется для разделения циклов. Для проведения данного преобразования необходима приватизируемость массива в цикле.
Преобразование сужения массива работает аналогично предыдущему, за исключением того, что копия массива имеет меньшее количество измерений относительно оригинала и размещается непосредственно в гнезде циклов, вследствие чего может нарушаться тесно-вложенность. Применяется для слияния циклов.
Разворот цикла изменяет порядок итерирования на обратный. Такое преобразование требуется в первую очередь как промежуточное для слияния циклов. Если точные границы цикла могут быть вычислены на этапе статического анализа, то они будут подставлены в заголовок цикла, в противном случае в заголовок попадут выражения, значения которых будут вычислены во время выполнения. Для выполнения преобразования необходимо отсутствие зависимостей в преобразуемом цикле .
Перестановка циклов может быть полезна для улучшения векторизации и кэширования и, кроме того, требуется для более сложных преобразований. Новый порядок циклов в гнезде определяется результатом последовательного применений транспозиций к исходной перестановке.
Реализация описанных преобразований в системе SAPFOR позволила применить их при распараллеливании программ из пакета NAS Parallel Benchmakrs, предназначенных для тестирования производительности высокопараллельных суперкомпьютеров. В частности, при распараллеливании программы LU в модели DVMH оказывается необходимым выполнение каждого из описанных преобразований.
