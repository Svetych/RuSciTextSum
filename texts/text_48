Исследование предельных значений процессорных датчиков, используемых для анализа производительности суперкомпьютерных приложений

В работе анализируется заложенный производителем набор процессорных датчиков, которые помогают оценивать производительность выполнения программ. Проблема в том, что максимальные значения этих датчиков на практике оказываются меньше заявленных, а порой и вовсе не указаны в явном виде.
В работе затронуто несколько значимых датчиков: промахи в кэш-память L1, L2 и L3, пропускная способность интеркоммуникационной MPI сети и сети, работающей с файловой системой.
Для нахождения теоретических пределов подсистемы памяти были изучены существующие работы по системе памяти процессоров семейства Haswell . Предложенные в статьях методы оценки времени доступа к различным уровням памяти не позволили получить теоретически возможные показания. Однако используемые авторами подходы, основанные на анализе спецификаций памяти микропроцессора и различных архитектурных решений, позволили создать собственный метод оценки теоретических пределов подсистемы памяти. Для получения теоретических пределов пропускной способности сетей были найдены характеристики сетевого оборудования.
Основываясь на полученных теоретических данных, реализован бенчмарк с использованием счетчиков библиотеки PAPI . Программа позволяет получить высокую частоту промахов в определенный уровень кэш-памяти, выбирая случайным образом сегмент из массива данных, размер которого соответствует уровню кэш-памяти, и производя операции с памятью на этом сегменте в случайном порядке. Кроме того бенчмарк поддерживает многопоточный режим, что позволило задействовать все ядра процессора и позволило на практике вплотную приблизиться к теоретическому пределу для каждого из уровней кэш-памяти. Практические пределы пропускных способностей сетей были получены с помощью найденных готовых бенчмарков с различными реализациями, которые были модернизированы для получения более высоких практических значений.
Многократные запуски бенчмарков с различными параметрами на суперкомпьютере Ломоносов-2 дали хорошие результаты в виде практических максимумов для всех уровней кэш-памяти и сетей. Полученные практические значения оказались близкими к теоретическим, достигая в большинстве случаев более 90% от теоретического максимума. Также были выявлены некоторые особенности системы памяти рассматриваемого семейства процессоров, которые не позволяют получить более высокие практические значения исследуемых датчиков. Изучение этих особенностей может стать объектом для дальнейших исследований.
