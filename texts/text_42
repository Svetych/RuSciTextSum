Трансляция таблицы потоков коммутатора программно-конфигурируемой сети в язык ассемблера сетевого процессора
В настоящее время продолжается активное развитие технологии программно-конфигурируемых сетей (ПКС) . Среди протоколов управления широкое распространение получил протокол OpenFlow . Правила обработки пакетов в OpenFlow коммутаторе организованы в таблицы потоков. Для классификации приходящих пакетов необходимо производить поиск правила в таблице потоков по значениям полей заголовка.
В работе рассматривается коммутатор, в котором основные задачи по обработке поступающих пакетов выполняет программируемый сетевой процессор (СП) . Поиск в программе на языке ассемблера данного СП реализуется в виде дерева поиска, состоящего из команд условных переходов. Особенностью рассматриваемого СП является отсутствие в памяти процессора отдельной области для данных программы. Данные непосредственно прописываются в машинных командах, поэтому каждое изменение данных требует загрузки обновленной программы в память СП.
При разработке ПКС коммутатора возникает задача по реализации классификации по таблице потоков в программе на языке ассемблера СП. Учитывая частоту обновления таблицы потоков, целесообразно поддерживать инкрементально обновляемое промежуточное представление таблицы потоков.
В работе проводится обзор существующих структур данных для выполнения классификации пакета по таблице потоков OpenFlow. Однако рассматриваемый в работе СП уникален по своей архитектуре, что накладывает ограничения на использование существующих решений.
По результатам анализа подходов предлагается поддерживающая добавление и удаление правил структура данных для промежуточного представления таблицы потоков и два способа трансляции структуры данных в программу на языке ассемблера, реализующую поиск по набору правил таблицы потоков. Разработанные способы позволяют получать программу, в процессе выполнения которой поле заголовка пакета загружается только один раз, а программа, полученная вторым способом, также не содержит дублирующих блоков команд для загрузки полей заголовка.
Для предложенных алгоритмов обновления структуры данных и её трансляции в язык ассемблера СП получена теоретическая оценка сложности. Для данных алгоритмов также проводится экспериментальное исследование с целью оценки объема памяти и среднего времени обработки пакета для получаемой программы на языке ассемблера, а также с целью оценки времени обновления структуры данных. Экспериментальные данные генерировались с использованием шаблонов таблиц потоков, соответствующих сценариям работы ПКС приложений. Для рассмотренных характеристик были выявлены линейные зависимости от количества правил в исходной таблице потоков. При сравнении программ, получаемых двумя разработанными способами трансляции, были определены шаблоны правил таблицы потоков, на которых каждый из способов получает программу, занимающую меньший объем памяти СП.
