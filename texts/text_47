Моделирование влияния агента системы мониторинга производительности на работу пользовательских задач

Исследование параллельного приложения, выполняемого на суперкомпьютере, можно проводить с помощью системы мониторинга производительности суперкомпьютера. За сбор данных о работе приложения отвечает агент системы мониторинга производительности. Для сбора информации о ресурсах, используемых приложением, агент системы запускается совместно с пользовательским приложением во время его счета, занимает ресурсы вычислительной системы. Таким образом, агент системы вносит негативное влияние в работу параллельного приложения — шум. Зачастую, при описании системы мониторинга производительности вопрос влияния соответствующей системы на параллельное приложение не обсуждается. Это влияние оценивается как незначительное, методология исследования данного вопроса не приводится. Результаты сущеcтвующих исследований  уровня влияния системы мониторинга на параллельные приложения сложно обобщить — при одинаковой частоте мониторинга влияние систем  на коллективные MPI операции сильно различается. При создании системы мониторинга производительности агент этой системы пытаются сделать как можно менее шумным, чтобы не влиять на работающие задачи. Однако способа измерить малый шум, создаваемый системой мониторинга, пока нет, и вопрос влияния агента системы мониторинга на параллельное приложение является малоизученным.
В данной работе описывается программный инструмент, предназначенный для обнаружения влияния системы мониторинга производительности суперкомпьютера — детектор шума. В основе работы детектора шума лежит измерение времени выполнения цикла, содержащего коллективные MPI операции (All-toAll, All-Reduce или Barrier). В работе рассматриваются разные варианты конфигурации запуска детектора шума с целью определения вариантов детектора, обладающих хорошей воспроизводимостью времени работы — стабильностью. Также в работе представлено средство, моделирующее присутствие агента системы мониторинга производительности — источник шума. Источник шума периодически выполняет суммирование массива в течение нескольких миллисекунд, оставшуюся часть секунды бездействует. Долю времени вычислений (от общего времени работы источника), умноженную на сто, будем считать уровнем шума в процентах, который создает источник шума.
Были рассмотрены 8 различных вариантов конфигурации детектора шума для определения стабильности их работы и возможности обнаружить шум 1%. Для каждого варианта детектора проводилось несколько запусков без искусственного шума и с ним на суперкомпьютере Ломоносов-2. Далее были отобраны 4 конфигурации детектора, способные обнаружить шум 1%, и проведено исследование их чувствительности — запуски с уменьшенным процентом нагрузки. В результате работы удалось установить, что детектор, основанный на операции All-to-All с пересылаемым сообщением объемом 2 КБ, и детектор, основанный на операции Barrier, обнаруживают шум от 1% до 0,3%. Шум 0,3% является достаточно малым, поэтому можно считать, что выбранные конфигурации детектора обладают хорошей чувствительностью.
